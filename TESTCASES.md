# Тест-кейсы API сервиса объявлений

## 1. Создание объявлений (`POST /api/1/item`)

### TC-001 — Успешное создание объявления
**Предусловия:**  
- Сервер доступен  
- Нет активных объявлений с тестовыми данными  

**Постусловия:**  
- Новое объявление создано в системе  
- Возвращен корректный UUID  

**Шаги теста:**
1. Отправить запрос:
   ```http
   POST /api/1/item
   Content-Type: application/json

   {
     "sellerID": 123456,
     "name": "Test Ad",
     "price": 1000,
     "statistics": {"likes": 0, "viewCount": 0, "contacts": 0}
   }
   ```

**Ожидаемые результаты:**  
Status: `200`  
Body:  
```json
{"status": "created - <UUID>"}
```

**Фактические результаты:** Соответствует  
**Статус:** Пройден  
**Приоритет:** High  
**Модуль:** Ads Creation  
**Метки:** smoke, api-v1  

---

### TC-002 — Создание без обязательного поля `price`
**Предусловия:** Сервер доступен  
**Постусловия:** Нет изменений в БД  

**Шаги теста:**
```http
POST /api/1/item
Content-Type: application/json

{
  "sellerID": 123456,
  "name": "Invalid Ad"
}
```

**Ожидаемые результаты:**  
Status: `400`  
Body: сообщение об ошибке валидации  

**Фактические результаты:**  
Status: `200`  
Body: содержит UUID  
**Статус:** Не пройден  
**Приоритет:** Critical  
**Модуль:** Ads Creation  
**Метки:** validation  

---

## 2. Получение объявлений (`GET /api/1/item/:id`)

### TC-003 — Получение существующего объявления
**Предусловия:** Создано объявление с ID=`test123`  
**Постусловия:** Данные не изменяются  

**Шаги теста:**  
```http
GET /api/1/item/test123
```

**Ожидаемые результаты:**  
Status: `200`  
Body: массив с 1 элементом, содержащим полные данные  

**Фактические результаты:** Соответствует  
**Статус:** Пройден  
**Приоритет:** High  
**Модуль:** Ads Retrieval  
**Метки:** retrieval  

---

### TC-004 — Запрос невалидного ID объявления
**Предусловия:** Сервер доступен  
**Постусловия:** Нет изменений в БД  

**Шаги теста:**  
```http
GET /api/1/item/invalid_id!
```

**Ожидаемые результаты:**  
Status: `400`  
Body: сообщение об ошибке формата ID  

**Фактические результаты:** Соответствует  
**Статус:** Пройден  
**Приоритет:** Medium  
**Модуль:** Ads Retrieval  
**Метки:** validation  

---

## 3. Объявления продавца (`GET /api/1/:sellerID/item`)

### TC-005 — Получение объявлений существующего продавца
**Предусловия:** Продавец `999888` имеет 2+ объявления  
**Постусловия:** Данные не изменяются  

**Шаги теста:**  
```http
GET /api/1/999888/item
```

**Ожидаемые результаты:**  
Status: `200`  
Body: массив с 2+ элементами  

**Фактические результаты:** Соответствует  
**Статус:** Пройден  
**Приоритет:** High  
**Модуль:** Seller Ads  
**Метки:** bulk-retrieval  

---

### TC-006 — Запрос несуществующего продавца
**Предусловия:** Сервер доступен  
**Постусловия:** Нет изменений в БД  

**Шаги теста:**  
```http
GET /api/1/999999999/item
```

**Ожидаемые результаты:**  
Status: `404`  
Body: сообщение "Seller not found"  

**Фактические результаты:**  
Status: `200`  
Body: пустой массив  
**Статус:** Не пройден  
**Приоритет:** High  
**Модуль:** Seller Ads  
**Метки:** error-handling  

---

## 4. Удаление объявлений (`DELETE /api/2/item/:id`)

### TC-007 — Удаление существующего объявления
**Предусловия:** Создано объявление с ID=`test123`  
**Постусловия:** Объявление удалено из БД  

**Шаги теста:**  
```http
DELETE /api/2/item/test123
```

**Ожидаемые результаты:**  
Status: `200`  
Body: подтверждение удаления  

**Фактические результаты:** Соответствует  
**Статус:** Пройден  
**Приоритет:** High  
**Модуль:** Ads Deletion  
**Метки:** api-v2  

---

### TC-008 — Двойное удаление объявления
**Предусловия:** Создано объявление с ID=`test123`  
**Постусловия:** Объявление удалено из БД  

**Шаги теста:**
```http
DELETE /api/2/item/test123
DELETE /api/2/item/test123
```

**Ожидаемые результаты:**  
Первый запрос: Status `200`  
Второй запрос: Status `404`  

**Фактические результаты:** Соответствует  
**Статус:** Пройден  
**Приоритет:** Medium  
**Модуль:** Ads Deletion  
**Метки:** idempotency  

---

## 5. Интеграция версий API

### TC-009 — Создание через v1 + удаление через v2
**Предусловия:** Сервер доступен  
**Постусловия:** Объявление создано и удалено  

**Шаги теста:**
1. Создать объявление:  
   ```http
   POST /api/1/item
   ```
2. Удалить объявление:  
   ```http
   DELETE /api/2/item/{id}
   ```

**Ожидаемые результаты:**  
- Обе операции возвращают Status `200`  
- `GET` запрос подтверждает удаление  

**Фактические результаты:** Соответствует  
**Статус:** Пройден  
**Приоритет:** High  
**Модуль:** API Integration  
**Метки:** cross-version